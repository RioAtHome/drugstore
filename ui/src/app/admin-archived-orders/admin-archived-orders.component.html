<div ngClass='main-container' ngClass.lt-md='main-container-lt-md'>
	<div fxLayout='row' fxLayout.lt-md='column' fxLayoutAlign='space-between center' class='h1-container' fxLayoutGap='10px'>
		<h1 fxFlexAlign.lt-md='start'>Orders</h1>
		<div class='form-container' fxLayoutGap='10px'>
		<form fxLayout='row' fxLayout.lt-lg='column' fxLayoutGap='10px' [formGroup]= "filterForm" (ngSubmit)='filterData()' novalidate>
			<div fxLayout='row' fxLayout.lt-md='column' fxLayoutGap='10px'>
			<div fxLayout.lt-md='row' fxLayoutGap.lt-md=10px fxLayoutGap='10px'>
			<mat-form-field appearance="fill" fxFlexAlign=center ngClass.lt-md='price'>
    
    <mat-label >Date</mat-label>
    <input matInput type='date' formControlName='date'>

  </mat-form-field>
  <mat-form-field appearance="fill" fxFlexAlign=center ngClass.lt-md='price'>
    <mat-label>Drug Name</mat-label>
    <input matInput type='text' formControlName='drugName'>
  </mat-form-field>
  </div>
  <div fxLayout='row' fxLayoutAlign='center center' fxLayoutGap='10px'>  	
  <mat-form-field appearance="fill" fxFlexAlign=center ngClass='price'>
    <mat-label>Min Price</mat-label>
    <input matInput type='number' formControlName='gtPrice'>
  </mat-form-field>
  <mat-form-field appearance="fill" fxFlexAlign=center ngClass='price'>
    <mat-label>Max Price</mat-label>
    <input matInput type='number' formControlName='ltPrice'>
  </mat-form-field>
  </div>
  </div>
  <div fxLayout='row' fxLayoutGap='10px' fxLayout.lt-md='row' fxLayoutAlign.lt-lg='center center'>
  <mat-form-field appearance="fill" fxFlexAlign=center>
    <mat-label>Pharmacy Name</mat-label>
    <input matInput type='text' formControlName='pharmacyName'>
  </mat-form-field>
  </div>

			<div fxFlexAlign=center>
			<button mat-raised-button type='submit'>Filter</button>
			</div>
		</form>
		</div>
		<button mat-raised-button (click)="onExport()">
			Export
		</button>
	</div>
	<div class='tables-container'>
	<div *ngFor='let pharmacy_orders of activeOrders.data'>
		<h3>{{pharmacy_orders.pharmacy_name}}</h3>
		<div class='table-container' ngClass.lt-md='table-container-lt-md' *ngFor='let orders of pharmacy_orders.orders'>
		<table mat-table [dataSource]="orders.ordered_drugs" ngClass.lt-md='table-lt-md'>
			<ng-container matColumnDef='id'>
				<th mat-header-cell *matHeaderCellDef>ID</th>
				<td mat-cell *matCellDef='let drug'>
					{{drug.id}}
					
				</td>
				<td mat-footer-cell *matFooterCellDef colspan="2">
				Created At: {{orders.created_at| stringToDate}}</td>
			</ng-container>
			<ng-container matColumnDef='drug_name'>
				<th mat-header-cell *matHeaderCellDef>Name</th>
				<td mat-cell *matCellDef='let drug'>
					{{drug.name}}
				</td>

			</ng-container>
			<ng-container matColumnDef='quantity'>
				<th mat-header-cell *matHeaderCellDef>Quantity</th>
				<td mat-cell *matCellDef='let drug'>
					{{drug.quantity}}
				</td>
				<td mat-footer-cell *matFooterCellDef colspan="2">
				Order Status: {{orders.status | acronymToStatus}}</td>
			</ng-container>
			<ng-container matColumnDef='expiration_date'>
				<th mat-header-cell *matHeaderCellDef>Expiration Time</th>
				<td mat-cell *matCellDef='let drug'>
					{{drug.exp_date}}
				</td>

			</ng-container>
			<ng-container matColumnDef='price_per_unit'>
				<th mat-header-cell *matHeaderCellDef>Price Per Unit</th>
				<td mat-cell *matCellDef='let drug'>
					{{drug.drug_price}}
				</td>
			</ng-container>
			<ng-container matColumnDef=total_price>
				<th mat-header-cell *matHeaderCellDef>Total Price</th>
				<td mat-cell *matCellDef='let drug'>
					{{drug.total_drug_price}}
				</td>
				<td mat-footer-cell *matFooterCellDef colspan="2">
				Order Price :{{orders.total_price}}</td>
			</ng-container>
			<ng-container matColumnDef='actions'>
				<td mat-footer-cell *matFooterCellDef colspan="2">
					<mat-checkbox class="example-margin">Mark As Completed</mat-checkbox>
			</ng-container>
			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			<tr mat-footer-row *matFooterRowDef="footerDisplayColumns"></tr>

		</table>
		</div>
	</div>
		<mat-paginator 
		(page) = "pageChanged($event)"
		[length] ="totalRows"
		[pageSize]="pageSize"
		[pageIndex]="currentPage"
		[pageSizeOptions]="pageSizeOptions">

	</mat-paginator>


	</div>
</div>